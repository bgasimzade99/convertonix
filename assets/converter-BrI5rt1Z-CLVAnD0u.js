const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C2FqwIQw-yIlvf1iy.js","assets/index-n2YMFGz9.js","assets/index-BKE9-a4i.css","assets/jspdf.es.min-CbiRSg5i-DGNfBwXG.js"])))=>i.map(i=>d[i]);
import{d as Ne,_ as Ke}from"./index-n2YMFGz9.js";const Oe=(_,T=Oe,D=T.f||(T.f=["assets/index-C2FqwIQw.js","assets/index-Djuotrda.js","assets/index-BKE9-a4i.css","assets/jspdf.es.min-CbiRSg5i.js"]))=>_.map(s=>D[s]);function at(_,T){return T.forEach(function(D){D&&typeof D!="string"&&!Array.isArray(D)&&Object.keys(D).forEach(function(s){if(s!=="default"&&!(s in _)){var e=Object.getOwnPropertyDescriptor(D,s);Object.defineProperty(_,s,e.get?e:{enumerable:!0,get:function(){return D[s]}})}})}),Object.freeze(_)}function Ge(_,T){return new Promise(function(D,s){let e;return st(_).then(function(t){try{return e=t,D(new Blob([T.slice(0,2),e,T.slice(2)],{type:"image/jpeg"}))}catch(l){return s(l)}},s)})}const st=_=>new Promise((T,D)=>{const s=new FileReader;s.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let l=0;if(t.getUint16(l)!==65496)return D("not a valid JPEG");for(l+=2;;){const a=t.getUint16(l);if(a===65498)break;const w=t.getUint16(l+2);if(a===65505&&t.getUint32(l+4)===1165519206){const A=l+10;let n;switch(t.getUint16(A)){case 18761:n=!0;break;case 19789:n=!1;break;default:return D("TIFF header contains invalid endian")}if(t.getUint16(A+2,n)!==42)return D("TIFF header contains invalid version");const r=t.getUint32(A+4,n),o=A+r+2+12*t.getUint16(A+r,n);for(let u=A+r+2;u<o;u+=12)if(t.getUint16(u,n)==274){if(t.getUint16(u+2,n)!==3)return D("Orientation data type is invalid");if(t.getUint32(u+4,n)!==1)return D("Orientation data count is invalid");t.setUint16(u+8,1,n);break}return T(e.slice(l,l+2+w))}l+=2+w}return T(new Blob)}),s.readAsArrayBuffer(_)});var Qe={},lt={get exports(){return Qe},set exports(_){Qe=_}};(function(_){var T,D,s={};lt.exports=s,s.parse=function(e,t){for(var l=s.bin.readUshort,a=s.bin.readUint,w=0,A={},n=new Uint8Array(e),r=n.length-4;a(n,r)!=101010256;)r--;w=r,w+=4;var o=l(n,w+=4);l(n,w+=2);var u=a(n,w+=2),g=a(n,w+=4);w+=4,w=g;for(var B=0;B<o;B++){a(n,w),w+=4,w+=4,w+=4,a(n,w+=4),u=a(n,w+=4);var v=a(n,w+=4),E=l(n,w+=4),C=l(n,w+2),L=l(n,w+4);w+=6;var I=a(n,w+=8);w+=4,w+=E+C+L,s._readLocal(n,I,A,u,v,t)}return A},s._readLocal=function(e,t,l,a,w,A){var n=s.bin.readUshort,r=s.bin.readUint;r(e,t),n(e,t+=4),n(e,t+=2);var o=n(e,t+=2);r(e,t+=2),r(e,t+=4),t+=4;var u=n(e,t+=8),g=n(e,t+=2);t+=2;var B=s.bin.readUTF8(e,t,u);if(t+=u,t+=g,A)l[B]={size:w,csize:a};else{var v=new Uint8Array(e.buffer,t);if(o==0)l[B]=new Uint8Array(v.buffer.slice(t,t+a));else{if(o!=8)throw"unknown compression method: "+o;var E=new Uint8Array(w);s.inflateRaw(v,E),l[B]=E}}},s.inflateRaw=function(e,t){return s.F.inflate(e,t)},s.inflate=function(e,t){return e[0],e[1],s.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},s.deflate=function(e,t){t==null&&(t={level:6});var l=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[l]=120,a[l+1]=156,l+=2,l=s.F.deflateRaw(e,a,l,t.level);var w=s.adler(e,0,e.length);return a[l+0]=w>>>24&255,a[l+1]=w>>>16&255,a[l+2]=w>>>8&255,a[l+3]=w>>>0&255,new Uint8Array(a.buffer,0,l+4)},s.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),a=s.F.deflateRaw(e,l,a,t.level);return new Uint8Array(l.buffer,0,a)},s.encode=function(e,t){t==null&&(t=!1);var l=0,a=s.bin.writeUint,w=s.bin.writeUshort,A={};for(var n in e){var r=!s._noNeed(n)&&!t,o=e[n],u=s.crc.crc(o,0,o.length);A[n]={cpr:r,usize:o.length,crc:u,file:r?s.deflateRaw(o):o}}for(var n in A)l+=A[n].file.length+30+46+2*s.bin.sizeUTF8(n);l+=22;var g=new Uint8Array(l),B=0,v=[];for(var n in A){var E=A[n];v.push(B),B=s._writeHeader(g,B,n,E,0)}var C=0,L=B;for(var n in A)E=A[n],v.push(B),B=s._writeHeader(g,B,n,E,1,v[C++]);var I=B-L;return a(g,B,101010256),B+=4,w(g,B+=4,C),w(g,B+=2,C),a(g,B+=2,I),a(g,B+=4,L),B+=4,B+=2,g.buffer},s._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},s._writeHeader=function(e,t,l,a,w,A){var n=s.bin.writeUint,r=s.bin.writeUshort,o=a.file;return n(e,t,w==0?67324752:33639248),t+=4,w==1&&(t+=2),r(e,t,20),r(e,t+=2,0),r(e,t+=2,a.cpr?8:0),n(e,t+=2,0),n(e,t+=4,a.crc),n(e,t+=4,o.length),n(e,t+=4,a.usize),r(e,t+=4,s.bin.sizeUTF8(l)),r(e,t+=2,0),t+=2,w==1&&(t+=2,t+=2,n(e,t+=6,A),t+=4),t+=s.bin.writeUTF8(e,t,l),w==0&&(e.set(o,t),t+=o.length),t},s.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,a=0;a<8;a++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,a){for(var w=0;w<a;w++)e=s.crc.table[255&(e^t[l+w])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^s.crc.update(4294967295,e,t,l)}},s.adler=function(e,t,l){for(var a=1,w=0,A=t,n=t+l;A<n;){for(var r=Math.min(A+5552,n);A<r;)w+=a+=e[A++];a%=65521,w%=65521}return w<<16|a},s.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var a="",w=0;w<l;w++)a+=String.fromCharCode(e[t+w]);return a},writeASCII:function(e,t,l){for(var a=0;a<l.length;a++)e[t+a]=l.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var a,w="",A=0;A<l;A++)w+="%"+s.bin.pad(e[t+A].toString(16));try{a=decodeURIComponent(w)}catch{return s.bin.readASCII(e,t,l)}return a},writeUTF8:function(e,t,l){for(var a=l.length,w=0,A=0;A<a;A++){var n=l.charCodeAt(A);if(!(4294967168&n))e[t+w]=n,w++;else if(!(4294965248&n))e[t+w]=192|n>>6,e[t+w+1]=128|n>>0&63,w+=2;else if(!(4294901760&n))e[t+w]=224|n>>12,e[t+w+1]=128|n>>6&63,e[t+w+2]=128|n>>0&63,w+=3;else{if(4292870144&n)throw"e";e[t+w]=240|n>>18,e[t+w+1]=128|n>>12&63,e[t+w+2]=128|n>>6&63,e[t+w+3]=128|n>>0&63,w+=4}}return w},sizeUTF8:function(e){for(var t=e.length,l=0,a=0;a<t;a++){var w=e.charCodeAt(a);if(!(4294967168&w))l++;else if(!(4294965248&w))l+=2;else if(!(4294901760&w))l+=3;else{if(4292870144&w)throw"e";l+=4}}return l}},s.F={},s.F.deflateRaw=function(e,t,l,a){var w=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],A=s.F.U,n=s.F._goodIndex;s.F._hash;var r=s.F._putsE,o=0,u=l<<3,g=0,B=e.length;if(a==0){for(;o<B;)r(t,u,o+(U=Math.min(65535,B-o))==B?1:0),u=s.F._copyExact(e,o,U,t,u+8),o+=U;return u>>>3}var v=A.lits,E=A.strt,C=A.prev,L=0,I=0,M=0,h=0,Q=0,f=0;for(B>2&&(E[f=s.F._hash(e,0)]=0),o=0;o<B;o++){if(Q=f,o+1<B-2){f=s.F._hash(e,o+1);var c=o+1&32767;C[c]=E[f],E[f]=c}if(g<=o){(L>14e3||I>26697)&&B-o>100&&(g<o&&(v[L]=o-g,L+=2,g=o),u=s.F._writeBlock(o==B-1||g==B?1:0,v,L,h,e,M,o-M,t,u),L=I=h=0,M=o);var b=0;o<B-2&&(b=s.F._bestMatch(e,o,C,Q,Math.min(w[2],B-o),w[3]));var U=b>>>16,y=65535&b;if(b!=0){y=65535&b;var F=n(U=b>>>16,A.of0);A.lhst[257+F]++;var m=n(y,A.df0);A.dhst[m]++,h+=A.exb[F]+A.dxb[m],v[L]=U<<23|o-g,v[L+1]=y<<16|F<<8|m,L+=2,g=o+U}else A.lhst[e[o]]++;I++}}for(M==o&&e.length!=0||(g<o&&(v[L]=o-g,L+=2,g=o),u=s.F._writeBlock(1,v,L,h,e,M,o-M,t,u),L=0,I=0,L=I=h=0,M=o);7&u;)u++;return u>>>3},s.F._bestMatch=function(e,t,l,a,w,A){var n=32767&t,r=l[n],o=n-r+32768&32767;if(r==n||a!=s.F._hash(e,t-o))return 0;for(var u=0,g=0,B=Math.min(32767,t);o<=B&&--A!=0&&r!=n;){if(u==0||e[t+u]==e[t+u-o]){var v=s.F._howLong(e,t,o);if(v>u){if(g=o,(u=v)>=w)break;o+2<v&&(v=o+2);for(var E=0,C=0;C<v-2;C++){var L=t-o+C+32768&32767,I=L-l[L]+32768&32767;I>E&&(E=I,r=L)}}}o+=(n=r)-(r=l[n])+32768&32767}return u<<16|g},s.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var a=t,w=Math.min(e.length,t+258);for(t+=3;t<w&&e[t]==e[t-l];)t++;return t-a},s.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(e,t,l,a,w,A,n,r,o){var u,g,B,v,E,C,L,I,M,h=s.F.U,Q=s.F._putsF,f=s.F._putsE;h.lhst[256]++,g=(u=s.F.getTrees())[0],B=u[1],v=u[2],E=u[3],C=u[4],L=u[5],I=u[6],M=u[7];var c=32+(o+3&7?8-(o+3&7):0)+(n<<3),b=a+s.F.contSize(h.fltree,h.lhst)+s.F.contSize(h.fdtree,h.dhst),U=a+s.F.contSize(h.ltree,h.lhst)+s.F.contSize(h.dtree,h.dhst);U+=14+3*L+s.F.contSize(h.itree,h.ihst)+(2*h.ihst[16]+3*h.ihst[17]+7*h.ihst[18]);for(var y=0;y<286;y++)h.lhst[y]=0;for(y=0;y<30;y++)h.dhst[y]=0;for(y=0;y<19;y++)h.ihst[y]=0;var F=c<b&&c<U?0:b<U?1:2;if(Q(r,o,e),Q(r,o+1,F),o+=3,F==0){for(;7&o;)o++;o=s.F._copyExact(w,A,n,r,o)}else{var m,p;if(F==1&&(m=h.fltree,p=h.fdtree),F==2){s.F.makeCodes(h.ltree,g),s.F.revCodes(h.ltree,g),s.F.makeCodes(h.dtree,B),s.F.revCodes(h.dtree,B),s.F.makeCodes(h.itree,v),s.F.revCodes(h.itree,v),m=h.ltree,p=h.dtree,f(r,o,E-257),f(r,o+=5,C-1),f(r,o+=5,L-4),o+=4;for(var d=0;d<L;d++)f(r,o+3*d,h.itree[1+(h.ordr[d]<<1)]);o+=3*L,o=s.F._codeTiny(I,h.itree,r,o),o=s.F._codeTiny(M,h.itree,r,o)}for(var i=A,k=0;k<l;k+=2){for(var R=t[k],P=R>>>23,W=i+(8388607&R);i<W;)o=s.F._writeLit(w[i++],m,r,o);if(P!=0){var O=t[k+1],j=O>>16,x=O>>8&255,S=255&O;f(r,o=s.F._writeLit(257+x,m,r,o),P-h.of0[x]),o+=h.exb[x],Q(r,o=s.F._writeLit(S,p,r,o),j-h.df0[S]),o+=h.dxb[S],i+=P}}o=s.F._writeLit(256,m,r,o)}return o},s.F._copyExact=function(e,t,l,a,w){var A=w>>>3;return a[A]=l,a[A+1]=l>>>8,a[A+2]=255-a[A],a[A+3]=255-a[A+1],A+=4,a.set(new Uint8Array(e.buffer,t,l),A),w+(l+4<<3)},s.F.getTrees=function(){for(var e=s.F.U,t=s.F._hufTree(e.lhst,e.ltree,15),l=s.F._hufTree(e.dhst,e.dtree,15),a=[],w=s.F._lenCodes(e.ltree,a),A=[],n=s.F._lenCodes(e.dtree,A),r=0;r<a.length;r+=2)e.ihst[a[r]]++;for(r=0;r<A.length;r+=2)e.ihst[A[r]]++;for(var o=s.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&e.itree[1+(e.ordr[u-1]<<1)]==0;)u--;return[t,l,o,w,n,u,a,A]},s.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},s.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},s.F.contSize=function(e,t){for(var l=0,a=0;a<t.length;a++)l+=t[a]*e[1+(a<<1)];return l},s.F._codeTiny=function(e,t,l,a){for(var w=0;w<e.length;w+=2){var A=e[w],n=e[w+1];a=s.F._writeLit(A,t,l,a);var r=A==16?2:A==17?3:7;A>15&&(s.F._putsE(l,a,n,r),a+=r)}return a},s.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var a=0;a<l;a+=2){var w=e[a+1],A=a+3<l?e[a+3]:-1,n=a+5<l?e[a+5]:-1,r=a==0?-1:e[a-1];if(w==0&&A==w&&n==w){for(var o=a+5;o+2<l&&e[o+2]==w;)o+=2;(u=Math.min(o+1-a>>>1,138))<11?t.push(17,u-3):t.push(18,u-11),a+=2*u-2}else if(w==r&&A==w&&n==w){for(o=a+5;o+2<l&&e[o+2]==w;)o+=2;var u=Math.min(o+1-a>>>1,6);t.push(16,u-3),a+=2*u-2}else t.push(w,0)}return l>>>1},s.F._hufTree=function(e,t,l){var a=[],w=e.length,A=t.length,n=0;for(n=0;n<A;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<w;n++)e[n]!=0&&a.push({lit:n,f:e[n]});var r=a.length,o=a.slice(0);if(r==0)return 0;if(r==1){var u=a[0].lit;return o=u==0?1:0,t[1+(u<<1)]=1,t[1+(o<<1)]=1,1}a.sort(function(I,M){return I.f-M.f});var g=a[0],B=a[1],v=0,E=1,C=2;for(a[0]={lit:-1,f:g.f+B.f,l:g,r:B,d:0};E!=r-1;)g=v!=E&&(C==r||a[v].f<a[C].f)?a[v++]:a[C++],B=v!=E&&(C==r||a[v].f<a[C].f)?a[v++]:a[C++],a[E++]={lit:-1,f:g.f+B.f,l:g,r:B};var L=s.F.setDepth(a[E-1],0);for(L>l&&(s.F.restrictDepth(o,l,L),L=l),n=0;n<r;n++)t[1+(o[n].lit<<1)]=o[n].d;return L},s.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(s.F.setDepth(e.l,t+1),s.F.setDepth(e.r,t+1))},s.F.restrictDepth=function(e,t,l){var a=0,w=1<<l-t,A=0;for(e.sort(function(r,o){return o.d==r.d?r.f-o.f:o.d-r.d}),a=0;a<e.length&&e[a].d>t;a++){var n=e[a].d;e[a].d=t,A+=w-(1<<l-n)}for(A>>>=l-t;A>0;)(n=e[a].d)<t?(e[a].d++,A-=1<<t-n-1):a++;for(;a>=0;a--)e[a].d==t&&A<0&&(e[a].d--,A++);A!=0&&console.log("debt left")},s.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},s.F._writeLit=function(e,t,l,a){return s.F._putsF(l,a,t[e<<1]),a+t[1+(e<<1)]},s.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var a=s.F,w=a._bitsF,A=a._bitsE,n=a._decodeTiny,r=a.makeCodes,o=a.codes2map,u=a._get17,g=a.U,B=t==null;B&&(t=new l(e.length>>>2<<3));for(var v,E,C=0,L=0,I=0,M=0,h=0,Q=0,f=0,c=0,b=0;C==0;)if(C=w(e,b,1),L=w(e,b+1,2),b+=3,L!=0){if(B&&(t=s.F._check(t,c+(1<<17))),L==1&&(v=g.flmap,E=g.fdmap,Q=511,f=31),L==2){I=A(e,b,5)+257,M=A(e,b+5,5)+1,h=A(e,b+10,4)+4,b+=14;for(var U=0;U<38;U+=2)g.itree[U]=0,g.itree[U+1]=0;var y=1;for(U=0;U<h;U++){var F=A(e,b+3*U,3);g.itree[1+(g.ordr[U]<<1)]=F,F>y&&(y=F)}b+=3*h,r(g.itree,y),o(g.itree,y,g.imap),v=g.lmap,E=g.dmap,b=n(g.imap,(1<<y)-1,I+M,e,b,g.ttree);var m=a._copyOut(g.ttree,0,I,g.ltree);Q=(1<<m)-1;var p=a._copyOut(g.ttree,I,M,g.dtree);f=(1<<p)-1,r(g.ltree,m),o(g.ltree,m,v),r(g.dtree,p),o(g.dtree,p,E)}for(;;){var d=v[u(e,b)&Q];b+=15&d;var i=d>>>4;if(!(i>>>8))t[c++]=i;else{if(i==256)break;var k=c+i-254;if(i>264){var R=g.ldef[i-257];k=c+(R>>>3)+A(e,b,7&R),b+=7&R}var P=E[u(e,b)&f];b+=15&P;var W=P>>>4,O=g.ddef[W],j=(O>>>4)+w(e,b,15&O);for(b+=15&O,B&&(t=s.F._check(t,c+(1<<17)));c<k;)t[c]=t[c++-j],t[c]=t[c++-j],t[c]=t[c++-j],t[c]=t[c++-j];c=k}}}else{7&b&&(b+=8-(7&b));var x=4+(b>>>3),S=e[x-4]|e[x-3]<<8;B&&(t=s.F._check(t,c+S)),t.set(new l(e.buffer,e.byteOffset+x,S),c),b=x+S<<3,c+=S}return t.length==c?t:t.slice(0,c)},s.F._check=function(e,t){var l=e.length;if(t<=l)return e;var a=new Uint8Array(Math.max(l<<1,t));return a.set(e,0),a},s.F._decodeTiny=function(e,t,l,a,w,A){for(var n=s.F._bitsE,r=s.F._get17,o=0;o<l;){var u=e[r(a,w)&t];w+=15&u;var g=u>>>4;if(g<=15)A[o]=g,o++;else{var B=0,v=0;g==16?(v=3+n(a,w,2),w+=2,B=A[o-1]):g==17?(v=3+n(a,w,3),w+=3):g==18&&(v=11+n(a,w,7),w+=7);for(var E=o+v;o<E;)A[o]=B,o++}}return w},s.F._copyOut=function(e,t,l,a){for(var w=0,A=0,n=a.length>>>1;A<l;){var r=e[A+t];a[A<<1]=0,a[1+(A<<1)]=r,r>w&&(w=r),A++}for(;A<n;)a[A<<1]=0,a[1+(A<<1)]=0,A++;return w},s.F.makeCodes=function(e,t){for(var l,a,w,A,n=s.F.U,r=e.length,o=n.bl_count,u=0;u<=t;u++)o[u]=0;for(u=1;u<r;u+=2)o[e[u]]++;var g=n.next_code;for(l=0,o[0]=0,a=1;a<=t;a++)l=l+o[a-1]<<1,g[a]=l;for(w=0;w<r;w+=2)(A=e[w+1])!=0&&(e[w]=g[A],g[A]++)},s.F.codes2map=function(e,t,l){for(var a=e.length,w=s.F.U.rev15,A=0;A<a;A+=2)if(e[A+1]!=0)for(var n=A>>1,r=e[A+1],o=n<<4|r,u=t-r,g=e[A]<<u,B=g+(1<<u);g!=B;)l[w[g]>>>15-t]=o,g++},s.F.revCodes=function(e,t){for(var l=s.F.U.rev15,a=15-t,w=0;w<e.length;w+=2){var A=e[w]<<t-e[w+1];e[w]=l[A]>>>a}},s.F._putsE=function(e,t,l){l<<=7&t;var a=t>>>3;e[a]|=l,e[a+1]|=l>>>8},s.F._putsF=function(e,t,l){l<<=7&t;var a=t>>>3;e[a]|=l,e[a+1]|=l>>>8,e[a+2]|=l>>>16},s.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},s.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},s.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},s.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},s.F.U=(T=Uint16Array,D=Uint32Array,{next_code:new T(16),bl_count:new T(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new T(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new D(32),flmap:new T(512),fltree:[],fdmap:new T(32),fdtree:[],lmap:new T(32768),ltree:[],ttree:[],dmap:new T(32768),dtree:[],imap:new T(512),itree:[],rev15:new T(32768),lhst:new D(286),dhst:new D(30),ihst:new D(19),lits:new D(15e3),strt:new T(65536),prev:new T(32768)}),function(){for(var e=s.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function a(w,A,n){for(;A--!=0;)w.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),s.F.makeCodes(e.fltree,9),s.F.codes2map(e.fltree,9,e.flmap),s.F.revCodes(e.fltree,9),a(e.fdtree,32,5),s.F.makeCodes(e.fdtree,5),s.F.codes2map(e.fdtree,5,e.fdmap),s.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()})();var ft=at({__proto__:null,default:Qe},[Qe]);const ue=function(){var _={nextZero(n,r){for(;n[r]!=0;)r++;return r},readUshort:(n,r)=>n[r]<<8|n[r+1],writeUshort(n,r,o){n[r]=o>>8&255,n[r+1]=255&o},readUint:(n,r)=>16777216*n[r]+(n[r+1]<<16|n[r+2]<<8|n[r+3]),writeUint(n,r,o){n[r]=o>>24&255,n[r+1]=o>>16&255,n[r+2]=o>>8&255,n[r+3]=255&o},readASCII(n,r,o){let u="";for(let g=0;g<o;g++)u+=String.fromCharCode(n[r+g]);return u},writeASCII(n,r,o){for(let u=0;u<o.length;u++)n[r+u]=o.charCodeAt(u)},readBytes(n,r,o){const u=[];for(let g=0;g<o;g++)u.push(n[r+g]);return u},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,r,o){let u,g="";for(let B=0;B<o;B++)g+=`%${_.pad(n[r+B].toString(16))}`;try{u=decodeURIComponent(g)}catch{return _.readASCII(n,r,o)}return u}};function T(n,r,o,u){const g=r*o,B=t(u),v=Math.ceil(r*B/8),E=new Uint8Array(4*g),C=new Uint32Array(E.buffer),{ctype:L}=u,{depth:I}=u,M=_.readUshort;if(L==6){const R=g<<2;if(I==8)for(var h=0;h<R;h+=4)E[h]=n[h],E[h+1]=n[h+1],E[h+2]=n[h+2],E[h+3]=n[h+3];if(I==16)for(h=0;h<R;h++)E[h]=n[h<<1]}else if(L==2){const R=u.tabs.tRNS;if(R==null){if(I==8)for(h=0;h<g;h++){var Q=3*h;C[h]=255<<24|n[Q+2]<<16|n[Q+1]<<8|n[Q]}if(I==16)for(h=0;h<g;h++)Q=6*h,C[h]=255<<24|n[Q+4]<<16|n[Q+2]<<8|n[Q]}else{var f=R[0];const P=R[1],W=R[2];if(I==8)for(h=0;h<g;h++){var c=h<<2;Q=3*h,C[h]=255<<24|n[Q+2]<<16|n[Q+1]<<8|n[Q],n[Q]==f&&n[Q+1]==P&&n[Q+2]==W&&(E[c+3]=0)}if(I==16)for(h=0;h<g;h++)c=h<<2,Q=6*h,C[h]=255<<24|n[Q+4]<<16|n[Q+2]<<8|n[Q],M(n,Q)==f&&M(n,Q+2)==P&&M(n,Q+4)==W&&(E[c+3]=0)}}else if(L==3){const R=u.tabs.PLTE,P=u.tabs.tRNS,W=P?P.length:0;if(I==1)for(var b=0;b<o;b++){var U=b*v,y=b*r;for(h=0;h<r;h++){c=y+h<<2;var F=3*(m=n[U+(h>>3)]>>7-((7&h)<<0)&1);E[c]=R[F],E[c+1]=R[F+1],E[c+2]=R[F+2],E[c+3]=m<W?P[m]:255}}if(I==2)for(b=0;b<o;b++)for(U=b*v,y=b*r,h=0;h<r;h++)c=y+h<<2,F=3*(m=n[U+(h>>2)]>>6-((3&h)<<1)&3),E[c]=R[F],E[c+1]=R[F+1],E[c+2]=R[F+2],E[c+3]=m<W?P[m]:255;if(I==4)for(b=0;b<o;b++)for(U=b*v,y=b*r,h=0;h<r;h++)c=y+h<<2,F=3*(m=n[U+(h>>1)]>>4-((1&h)<<2)&15),E[c]=R[F],E[c+1]=R[F+1],E[c+2]=R[F+2],E[c+3]=m<W?P[m]:255;if(I==8)for(h=0;h<g;h++){var m;c=h<<2,F=3*(m=n[h]),E[c]=R[F],E[c+1]=R[F+1],E[c+2]=R[F+2],E[c+3]=m<W?P[m]:255}}else if(L==4){if(I==8)for(h=0;h<g;h++){c=h<<2;var p=n[d=h<<1];E[c]=p,E[c+1]=p,E[c+2]=p,E[c+3]=n[d+1]}if(I==16)for(h=0;h<g;h++){var d;c=h<<2,p=n[d=h<<2],E[c]=p,E[c+1]=p,E[c+2]=p,E[c+3]=n[d+2]}}else if(L==0)for(f=u.tabs.tRNS?u.tabs.tRNS:-1,b=0;b<o;b++){const R=b*v,P=b*r;if(I==1)for(var i=0;i<r;i++){var k=(p=255*(n[R+(i>>>3)]>>>7-(7&i)&1))==255*f?0:255;C[P+i]=k<<24|p<<16|p<<8|p}else if(I==2)for(i=0;i<r;i++)k=(p=85*(n[R+(i>>>2)]>>>6-((3&i)<<1)&3))==85*f?0:255,C[P+i]=k<<24|p<<16|p<<8|p;else if(I==4)for(i=0;i<r;i++)k=(p=17*(n[R+(i>>>1)]>>>4-((1&i)<<2)&15))==17*f?0:255,C[P+i]=k<<24|p<<16|p<<8|p;else if(I==8)for(i=0;i<r;i++)k=(p=n[R+i])==f?0:255,C[P+i]=k<<24|p<<16|p<<8|p;else if(I==16)for(i=0;i<r;i++)p=n[R+(i<<1)],k=M(n,R+(i<<1))==f?0:255,C[P+i]=k<<24|p<<16|p<<8|p}return E}function D(n,r,o,u){const g=t(n),B=Math.ceil(o*g/8),v=new Uint8Array((B+1+n.interlace)*u);return r=n.tabs.CgBI?e(r,v):s(r,v),n.interlace==0?r=l(r,n,0,o,u):n.interlace==1&&(r=function(E,C){const L=C.width,I=C.height,M=t(C),h=M>>3,Q=Math.ceil(L*M/8),f=new Uint8Array(I*Q);let c=0;const b=[0,0,4,0,2,0,1],U=[0,4,0,2,0,1,0],y=[8,8,8,4,4,2,2],F=[8,8,4,4,2,2,1];let m=0;for(;m<7;){const d=y[m],i=F[m];let k=0,R=0,P=b[m];for(;P<I;)P+=d,R++;let W=U[m];for(;W<L;)W+=i,k++;const O=Math.ceil(k*M/8);l(E,C,c,k,R);let j=0,x=b[m];for(;x<I;){let S=U[m],V=c+j*O<<3;for(;S<L;){var p;if(M==1&&(p=(p=E[V>>3])>>7-(7&V)&1,f[x*Q+(S>>3)]|=p<<7-((7&S)<<0)),M==2&&(p=(p=E[V>>3])>>6-(7&V)&3,f[x*Q+(S>>2)]|=p<<6-((3&S)<<1)),M==4&&(p=(p=E[V>>3])>>4-(7&V)&15,f[x*Q+(S>>1)]|=p<<4-((1&S)<<2)),M>=8){const ie=x*Q+S*h;for(let z=0;z<h;z++)f[ie+z]=E[(V>>3)+z]}V+=M,S+=i}j++,x+=d}k*R!=0&&(c+=R*(1+O)),m+=1}return f}(r,n)),r}function s(n,r){return e(new Uint8Array(n.buffer,2,n.length-6),r)}var e=function(){const n={H:{}};return n.H.N=function(r,o){const u=Uint8Array;let g,B,v=0,E=0,C=0,L=0,I=0,M=0,h=0,Q=0,f=0;if(r[0]==3&&r[1]==0)return o||new u(0);const c=n.H,b=c.b,U=c.e,y=c.R,F=c.n,m=c.A,p=c.Z,d=c.m,i=o==null;for(i&&(o=new u(r.length>>>2<<5));v==0;)if(v=b(r,f,1),E=b(r,f+1,2),f+=3,E!=0){if(i&&(o=n.H.W(o,Q+(1<<17))),E==1&&(g=d.J,B=d.h,M=511,h=31),E==2){C=U(r,f,5)+257,L=U(r,f+5,5)+1,I=U(r,f+10,4)+4,f+=14;let R=1;for(var k=0;k<38;k+=2)d.Q[k]=0,d.Q[k+1]=0;for(k=0;k<I;k++){const O=U(r,f+3*k,3);d.Q[1+(d.X[k]<<1)]=O,O>R&&(R=O)}f+=3*I,F(d.Q,R),m(d.Q,R,d.u),g=d.w,B=d.d,f=y(d.u,(1<<R)-1,C+L,r,f,d.v);const P=c.V(d.v,0,C,d.C);M=(1<<P)-1;const W=c.V(d.v,C,L,d.D);h=(1<<W)-1,F(d.C,P),m(d.C,P,g),F(d.D,W),m(d.D,W,B)}for(;;){const R=g[p(r,f)&M];f+=15&R;const P=R>>>4;if(!(P>>>8))o[Q++]=P;else{if(P==256)break;{let W=Q+P-254;if(P>264){const V=d.q[P-257];W=Q+(V>>>3)+U(r,f,7&V),f+=7&V}const O=B[p(r,f)&h];f+=15&O;const j=O>>>4,x=d.c[j],S=(x>>>4)+b(r,f,15&x);for(f+=15&x;Q<W;)o[Q]=o[Q++-S],o[Q]=o[Q++-S],o[Q]=o[Q++-S],o[Q]=o[Q++-S];Q=W}}}}else{7&f&&(f+=8-(7&f));const R=4+(f>>>3),P=r[R-4]|r[R-3]<<8;i&&(o=n.H.W(o,Q+P)),o.set(new u(r.buffer,r.byteOffset+R,P),Q),f=R+P<<3,Q+=P}return o.length==Q?o:o.slice(0,Q)},n.H.W=function(r,o){const u=r.length;if(o<=u)return r;const g=new Uint8Array(u<<1);return g.set(r,0),g},n.H.R=function(r,o,u,g,B,v){const E=n.H.e,C=n.H.Z;let L=0;for(;L<u;){const I=r[C(g,B)&o];B+=15&I;const M=I>>>4;if(M<=15)v[L]=M,L++;else{let h=0,Q=0;M==16?(Q=3+E(g,B,2),B+=2,h=v[L-1]):M==17?(Q=3+E(g,B,3),B+=3):M==18&&(Q=11+E(g,B,7),B+=7);const f=L+Q;for(;L<f;)v[L]=h,L++}}return B},n.H.V=function(r,o,u,g){let B=0,v=0;const E=g.length>>>1;for(;v<u;){const C=r[v+o];g[v<<1]=0,g[1+(v<<1)]=C,C>B&&(B=C),v++}for(;v<E;)g[v<<1]=0,g[1+(v<<1)]=0,v++;return B},n.H.n=function(r,o){const u=n.H.m,g=r.length;let B,v,E,C;const L=u.j;for(var I=0;I<=o;I++)L[I]=0;for(I=1;I<g;I+=2)L[r[I]]++;const M=u.K;for(B=0,L[0]=0,v=1;v<=o;v++)B=B+L[v-1]<<1,M[v]=B;for(E=0;E<g;E+=2)C=r[E+1],C!=0&&(r[E]=M[C],M[C]++)},n.H.A=function(r,o,u){const g=r.length,B=n.H.m.r;for(let v=0;v<g;v+=2)if(r[v+1]!=0){const E=v>>1,C=r[v+1],L=E<<4|C,I=o-C;let M=r[v]<<I;const h=M+(1<<I);for(;M!=h;)u[B[M]>>>15-o]=L,M++}},n.H.l=function(r,o){const u=n.H.m.r,g=15-o;for(let B=0;B<r.length;B+=2){const v=r[B]<<o-r[B+1];r[B]=u[v]>>>g}},n.H.M=function(r,o,u){u<<=7&o;const g=o>>>3;r[g]|=u,r[g+1]|=u>>>8},n.H.I=function(r,o,u){u<<=7&o;const g=o>>>3;r[g]|=u,r[g+1]|=u>>>8,r[g+2]|=u>>>16},n.H.e=function(r,o,u){return(r[o>>>3]|r[1+(o>>>3)]<<8)>>>(7&o)&(1<<u)-1},n.H.b=function(r,o,u){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16)>>>(7&o)&(1<<u)-1},n.H.Z=function(r,o){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16)>>>(7&o)},n.H.i=function(r,o){return(r[o>>>3]|r[1+(o>>>3)]<<8|r[2+(o>>>3)]<<16|r[3+(o>>>3)]<<24)>>>(7&o)},n.H.m=function(){const r=Uint16Array,o=Uint32Array;return{K:new r(16),j:new r(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new r(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new o(32),J:new r(512),_:[],h:new r(32),$:[],w:new r(32768),C:[],v:[],d:new r(32768),D:[],u:new r(512),Q:[],r:new r(32768),s:new o(286),Y:new o(30),a:new o(19),t:new o(15e3),k:new r(65536),g:new r(32768)}}(),function(){const r=n.H.m;for(var o=0;o<32768;o++){let g=o;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,r.r[o]=(g>>>16|g<<16)>>>17}function u(g,B,v){for(;B--!=0;)g.push(0,v)}for(o=0;o<32;o++)r.q[o]=r.S[o]<<3|r.T[o],r.c[o]=r.p[o]<<4|r.z[o];u(r._,144,8),u(r._,112,9),u(r._,24,7),u(r._,8,8),n.H.n(r._,9),n.H.A(r._,9,r.J),n.H.l(r._,9),u(r.$,32,5),n.H.n(r.$,5),n.H.A(r.$,5,r.h),n.H.l(r.$,5),u(r.Q,19,0),u(r.C,286,0),u(r.D,30,0),u(r.v,320,0)}(),n.H.N}();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function l(n,r,o,u,g){let B=t(r);const v=Math.ceil(u*B/8);let E,C;B=Math.ceil(B/8);let L=n[o],I=0;if(L>1&&(n[o]=[0,0,1][L-2]),L==3)for(I=B;I<v;I++)n[I+1]=n[I+1]+(n[I+1-B]>>>1)&255;for(let M=0;M<g;M++)if(E=o+M*v,C=E+M+1,L=n[C-1],I=0,L==0)for(;I<v;I++)n[E+I]=n[C+I];else if(L==1){for(;I<B;I++)n[E+I]=n[C+I];for(;I<v;I++)n[E+I]=n[C+I]+n[E+I-B]}else if(L==2)for(;I<v;I++)n[E+I]=n[C+I]+n[E+I-v];else if(L==3){for(;I<B;I++)n[E+I]=n[C+I]+(n[E+I-v]>>>1);for(;I<v;I++)n[E+I]=n[C+I]+(n[E+I-v]+n[E+I-B]>>>1)}else{for(;I<B;I++)n[E+I]=n[C+I]+a(0,n[E+I-v],0);for(;I<v;I++)n[E+I]=n[C+I]+a(n[E+I-B],n[E+I-v],n[E+I-B-v])}return n}function a(n,r,o){const u=n+r-o,g=u-n,B=u-r,v=u-o;return g*g<=B*B&&g*g<=v*v?n:B*B<=v*v?r:o}function w(n,r,o){o.width=_.readUint(n,r),r+=4,o.height=_.readUint(n,r),r+=4,o.depth=n[r],r++,o.ctype=n[r],r++,o.compress=n[r],r++,o.filter=n[r],r++,o.interlace=n[r],r++}function A(n,r,o,u,g,B,v,E,C){const L=Math.min(r,g),I=Math.min(o,B);let M=0,h=0;for(let p=0;p<I;p++)for(let d=0;d<L;d++)if(v>=0&&E>=0?(M=p*r+d<<2,h=(E+p)*g+v+d<<2):(M=(-E+p)*r-v+d<<2,h=p*g+d<<2),C==0)u[h]=n[M],u[h+1]=n[M+1],u[h+2]=n[M+2],u[h+3]=n[M+3];else if(C==1){var Q=n[M+3]*.00392156862745098,f=n[M]*Q,c=n[M+1]*Q,b=n[M+2]*Q,U=u[h+3]*(1/255),y=u[h]*U,F=u[h+1]*U,m=u[h+2]*U;const i=1-Q,k=Q+U*i,R=k==0?0:1/k;u[h+3]=255*k,u[h+0]=(f+y*i)*R,u[h+1]=(c+F*i)*R,u[h+2]=(b+m*i)*R}else if(C==2)Q=n[M+3],f=n[M],c=n[M+1],b=n[M+2],U=u[h+3],y=u[h],F=u[h+1],m=u[h+2],Q==U&&f==y&&c==F&&b==m?(u[h]=0,u[h+1]=0,u[h+2]=0,u[h+3]=0):(u[h]=f,u[h+1]=c,u[h+2]=b,u[h+3]=Q);else if(C==3){if(Q=n[M+3],f=n[M],c=n[M+1],b=n[M+2],U=u[h+3],y=u[h],F=u[h+1],m=u[h+2],Q==U&&f==y&&c==F&&b==m)continue;if(Q<220&&U>20)return!1}return!0}return{decode:function(n){const r=new Uint8Array(n);let o=8;const u=_,g=u.readUshort,B=u.readUint,v={tabs:{},frames:[]},E=new Uint8Array(r.length);let C,L=0,I=0;const M=[137,80,78,71,13,10,26,10];for(var h=0;h<8;h++)if(r[h]!=M[h])throw"The input is not a PNG file!";for(;o<r.length;){const m=u.readUint(r,o);o+=4;const p=u.readASCII(r,o,4);if(o+=4,p=="IHDR")w(r,o,v);else if(p=="iCCP"){for(var Q=o;r[Q]!=0;)Q++;u.readASCII(r,o,Q-o),r[Q+1];const d=r.slice(Q+2,o+m);let i=null;try{i=s(d)}catch{i=e(d)}v.tabs[p]=i}else if(p=="CgBI")v.tabs[p]=r.slice(o,o+4);else if(p=="IDAT"){for(h=0;h<m;h++)E[L+h]=r[o+h];L+=m}else if(p=="acTL")v.tabs[p]={num_frames:B(r,o),num_plays:B(r,o+4)},C=new Uint8Array(r.length);else if(p=="fcTL"){I!=0&&((F=v.frames[v.frames.length-1]).data=D(v,C.slice(0,I),F.rect.width,F.rect.height),I=0);const d={x:B(r,o+12),y:B(r,o+16),width:B(r,o+4),height:B(r,o+8)};let i=g(r,o+22);i=g(r,o+20)/(i==0?100:i);const k={rect:d,delay:Math.round(1e3*i),dispose:r[o+24],blend:r[o+25]};v.frames.push(k)}else if(p=="fdAT"){for(h=0;h<m-4;h++)C[I+h]=r[o+h+4];I+=m-4}else if(p=="pHYs")v.tabs[p]=[u.readUint(r,o),u.readUint(r,o+4),r[o+8]];else if(p=="cHRM")for(v.tabs[p]=[],h=0;h<8;h++)v.tabs[p].push(u.readUint(r,o+4*h));else if(p=="tEXt"||p=="zTXt"){v.tabs[p]==null&&(v.tabs[p]={});var f=u.nextZero(r,o),c=u.readASCII(r,o,f-o),b=o+m-f-1;if(p=="tEXt")y=u.readASCII(r,f+1,b);else{var U=s(r.slice(f+2,f+2+b));y=u.readUTF8(U,0,U.length)}v.tabs[p][c]=y}else if(p=="iTXt"){v.tabs[p]==null&&(v.tabs[p]={}),f=0,Q=o,f=u.nextZero(r,Q),c=u.readASCII(r,Q,f-Q);const d=r[Q=f+1];var y;r[Q+1],Q+=2,f=u.nextZero(r,Q),u.readASCII(r,Q,f-Q),Q=f+1,f=u.nextZero(r,Q),u.readUTF8(r,Q,f-Q),b=m-((Q=f+1)-o),d==0?y=u.readUTF8(r,Q,b):(U=s(r.slice(Q,Q+b)),y=u.readUTF8(U,0,U.length)),v.tabs[p][c]=y}else if(p=="PLTE")v.tabs[p]=u.readBytes(r,o,m);else if(p=="hIST"){const d=v.tabs.PLTE.length/3;for(v.tabs[p]=[],h=0;h<d;h++)v.tabs[p].push(g(r,o+2*h))}else if(p=="tRNS")v.ctype==3?v.tabs[p]=u.readBytes(r,o,m):v.ctype==0?v.tabs[p]=g(r,o):v.ctype==2&&(v.tabs[p]=[g(r,o),g(r,o+2),g(r,o+4)]);else if(p=="gAMA")v.tabs[p]=u.readUint(r,o)/1e5;else if(p=="sRGB")v.tabs[p]=r[o];else if(p=="bKGD")v.ctype==0||v.ctype==4?v.tabs[p]=[g(r,o)]:v.ctype==2||v.ctype==6?v.tabs[p]=[g(r,o),g(r,o+2),g(r,o+4)]:v.ctype==3&&(v.tabs[p]=r[o]);else if(p=="IEND")break;o+=m,u.readUint(r,o),o+=4}var F;return I!=0&&((F=v.frames[v.frames.length-1]).data=D(v,C.slice(0,I),F.rect.width,F.rect.height)),v.data=D(v,E,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(n){const r=n.width,o=n.height;if(n.tabs.acTL==null)return[T(n.data,r,o,n).buffer];const u=[];n.frames[0].data==null&&(n.frames[0].data=n.data);const g=r*o*4,B=new Uint8Array(g),v=new Uint8Array(g),E=new Uint8Array(g);for(let L=0;L<n.frames.length;L++){const I=n.frames[L],M=I.rect.x,h=I.rect.y,Q=I.rect.width,f=I.rect.height,c=T(I.data,Q,f,n);if(L!=0)for(var C=0;C<g;C++)E[C]=B[C];if(I.blend==0?A(c,Q,f,B,r,o,M,h,0):I.blend==1&&A(c,Q,f,B,r,o,M,h,1),u.push(B.buffer.slice(0)),I.dispose!=0){if(I.dispose==1)A(v,Q,f,B,r,o,M,h,0);else if(I.dispose==2)for(C=0;C<g;C++)B[C]=E[C]}}return u},_paeth:a,_copyTile:A,_bin:_}}();(function(){const{_copyTile:_}=ue,{_bin:T}=ue,D=ue._paeth;var s={table:function(){const f=new Uint32Array(256);for(let c=0;c<256;c++){let b=c;for(let U=0;U<8;U++)1&b?b=3988292384^b>>>1:b>>>=1;f[c]=b}return f}(),update(f,c,b,U){for(let y=0;y<U;y++)f=s.table[255&(f^c[b+y])]^f>>>8;return f},crc:(f,c,b)=>4294967295^s.update(4294967295,f,c,b)};function e(f,c,b,U){c[b]+=f[0]*U>>4,c[b+1]+=f[1]*U>>4,c[b+2]+=f[2]*U>>4,c[b+3]+=f[3]*U>>4}function t(f){return Math.max(0,Math.min(255,f))}function l(f,c){const b=f[0]-c[0],U=f[1]-c[1],y=f[2]-c[2],F=f[3]-c[3];return b*b+U*U+y*y+F*F}function a(f,c,b,U,y,F,m){m==null&&(m=1);const p=U.length,d=[];for(var i=0;i<p;i++){const S=U[i];d.push([S>>>0&255,S>>>8&255,S>>>16&255,S>>>24&255])}for(i=0;i<p;i++){let S=4294967295;for(var k=0,R=0;R<p;R++){var P=l(d[i],d[R]);R!=i&&P<S&&(S=P,k=R)}}const W=new Uint32Array(y.buffer),O=new Int16Array(c*b*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(i=0;i<j.length;i++)j[i]=255*((j[i]+.5)/16-.5);for(let S=0;S<b;S++)for(let V=0;V<c;V++){var x;i=4*(S*c+V),m!=2?x=[t(f[i]+O[i]),t(f[i+1]+O[i+1]),t(f[i+2]+O[i+2]),t(f[i+3]+O[i+3])]:(P=j[4*(3&S)+(3&V)],x=[t(f[i]+P),t(f[i+1]+P),t(f[i+2]+P),t(f[i+3]+P)]),k=0;let ie=16777215;for(R=0;R<p;R++){const G=l(x,d[R]);G<ie&&(ie=G,k=R)}const z=d[k],K=[x[0]-z[0],x[1]-z[1],x[2]-z[2],x[3]-z[3]];m==1&&(V!=c-1&&e(K,O,i+4,7),S!=b-1&&(V!=0&&e(K,O,i+4*c-4,3),e(K,O,i+4*c,5),V!=c-1&&e(K,O,i+4*c+4,1))),F[i>>2]=k,W[i>>2]=U[k]}}function w(f,c,b,U,y){y==null&&(y={});const{crc:F}=s,m=T.writeUint,p=T.writeUshort,d=T.writeASCII;let i=8;const k=f.frames.length>1;let R,P=!1,W=33+(k?20:0);if(y.sRGB!=null&&(W+=13),y.pHYs!=null&&(W+=21),y.iCCP!=null&&(R=pako.deflate(y.iCCP),W+=21+R.length+4),f.ctype==3){for(var O=f.plte.length,j=0;j<O;j++)f.plte[j]>>>24!=255&&(P=!0);W+=8+3*O+4+(P?8+1*O+4:0)}for(var x=0;x<f.frames.length;x++)k&&(W+=38),W+=(z=f.frames[x]).cimg.length+12,x!=0&&(W+=4);W+=12;const S=new Uint8Array(W),V=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)S[j]=V[j];if(m(S,i,13),i+=4,d(S,i,"IHDR"),i+=4,m(S,i,c),i+=4,m(S,i,b),i+=4,S[i]=f.depth,i++,S[i]=f.ctype,i++,S[i]=0,i++,S[i]=0,i++,S[i]=0,i++,m(S,i,F(S,i-17,17)),i+=4,y.sRGB!=null&&(m(S,i,1),i+=4,d(S,i,"sRGB"),i+=4,S[i]=y.sRGB,i++,m(S,i,F(S,i-5,5)),i+=4),y.iCCP!=null){const K=13+R.length;m(S,i,K),i+=4,d(S,i,"iCCP"),i+=4,d(S,i,"ICC profile"),i+=11,i+=2,S.set(R,i),i+=R.length,m(S,i,F(S,i-(K+4),K+4)),i+=4}if(y.pHYs!=null&&(m(S,i,9),i+=4,d(S,i,"pHYs"),i+=4,m(S,i,y.pHYs[0]),i+=4,m(S,i,y.pHYs[1]),i+=4,S[i]=y.pHYs[2],i++,m(S,i,F(S,i-13,13)),i+=4),k&&(m(S,i,8),i+=4,d(S,i,"acTL"),i+=4,m(S,i,f.frames.length),i+=4,m(S,i,y.loop!=null?y.loop:0),i+=4,m(S,i,F(S,i-12,12)),i+=4),f.ctype==3){for(m(S,i,3*(O=f.plte.length)),i+=4,d(S,i,"PLTE"),i+=4,j=0;j<O;j++){const K=3*j,G=f.plte[j],$=255&G,Z=G>>>8&255,Ae=G>>>16&255;S[i+K+0]=$,S[i+K+1]=Z,S[i+K+2]=Ae}if(i+=3*O,m(S,i,F(S,i-3*O-4,3*O+4)),i+=4,P){for(m(S,i,O),i+=4,d(S,i,"tRNS"),i+=4,j=0;j<O;j++)S[i+j]=f.plte[j]>>>24&255;i+=O,m(S,i,F(S,i-O-4,O+4)),i+=4}}let ie=0;for(x=0;x<f.frames.length;x++){var z=f.frames[x];k&&(m(S,i,26),i+=4,d(S,i,"fcTL"),i+=4,m(S,i,ie++),i+=4,m(S,i,z.rect.width),i+=4,m(S,i,z.rect.height),i+=4,m(S,i,z.rect.x),i+=4,m(S,i,z.rect.y),i+=4,p(S,i,U[x]),i+=2,p(S,i,1e3),i+=2,S[i]=z.dispose,i++,S[i]=z.blend,i++,m(S,i,F(S,i-30,30)),i+=4);const K=z.cimg;m(S,i,(O=K.length)+(x==0?0:4)),i+=4;const G=i;d(S,i,x==0?"IDAT":"fdAT"),i+=4,x!=0&&(m(S,i,ie++),i+=4),S.set(K,i),i+=O,m(S,i,F(S,G,i-G)),i+=4}return m(S,i,0),i+=4,d(S,i,"IEND"),i+=4,m(S,i,F(S,i-4,4)),i+=4,S.buffer}function A(f,c,b){for(let U=0;U<f.frames.length;U++){const y=f.frames[U];y.rect.width;const F=y.rect.height,m=new Uint8Array(F*y.bpl+F);y.cimg=u(y.img,F,y.bpp,y.bpl,m,c,b)}}function n(f,c,b,U,y){const F=y[0],m=y[1],p=y[2],d=y[3],i=y[4],k=y[5];let R=6,P=8,W=255;for(var O=0;O<f.length;O++){const J=new Uint8Array(f[O]);for(var j=J.length,x=0;x<j;x+=4)W&=J[x+3]}const S=W!=255,V=function(J,N,H,fe,ee,te){const q=[];for(var Y=0;Y<J.length;Y++){const oe=new Uint8Array(J[Y]),ce=new Uint32Array(oe.buffer);var se;let le=0,we=0,de=N,Ue=H,Pe=fe?1:0;if(Y!=0){const ot=te||fe||Y==1||q[Y-2].dispose!=0?1:2;let xe=0,Ve=1e9;for(let _e=0;_e<ot;_e++){var me=new Uint8Array(J[Y-1-_e]);const it=new Uint32Array(J[Y-1-_e]);let pe=N,be=H,Ie=-1,Ee=-1;for(let ye=0;ye<H;ye++)for(let Fe=0;Fe<N;Fe++)ce[re=ye*N+Fe]!=it[re]&&(Fe<pe&&(pe=Fe),Fe>Ie&&(Ie=Fe),ye<be&&(be=ye),ye>Ee&&(Ee=ye));Ie==-1&&(pe=be=Ie=Ee=0),ee&&((1&pe)==1&&pe--,(1&be)==1&&be--);const ze=(Ie-pe+1)*(Ee-be+1);ze<Ve&&(Ve=ze,xe=_e,le=pe,we=be,de=Ie-pe+1,Ue=Ee-be+1)}me=new Uint8Array(J[Y-1-xe]),xe==1&&(q[Y-1].dispose=2),se=new Uint8Array(de*Ue*4),_(me,N,H,se,de,Ue,-le,-we,0),Pe=_(oe,N,H,se,de,Ue,-le,-we,3)?1:0,Pe==1?o(oe,N,H,se,{x:le,y:we,width:de,height:Ue}):_(oe,N,H,se,de,Ue,-le,-we,0)}else se=oe.slice(0);q.push({rect:{x:le,y:we,width:de,height:Ue},img:se,blend:Pe,dispose:0})}if(fe)for(Y=0;Y<q.length;Y++){if((ve=q[Y]).blend==1)continue;const oe=ve.rect,ce=q[Y-1].rect,le=Math.min(oe.x,ce.x),we=Math.min(oe.y,ce.y),de={x:le,y:we,width:Math.max(oe.x+oe.width,ce.x+ce.width)-le,height:Math.max(oe.y+oe.height,ce.y+ce.height)-we};q[Y-1].dispose=1,Y-1!=0&&r(J,N,H,q,Y-1,de,ee),r(J,N,H,q,Y,de,ee)}let Te=0;if(J.length!=1)for(var re=0;re<q.length;re++){var ve;Te+=(ve=q[re]).rect.width*ve.rect.height}return q}(f,c,b,F,m,p),ie={},z=[],K=[];if(U!=0){const J=[];for(x=0;x<V.length;x++)J.push(V[x].img.buffer);const N=function(ee){let te=0;for(var q=0;q<ee.length;q++)te+=ee[q].byteLength;const Y=new Uint8Array(te);let se=0;for(q=0;q<ee.length;q++){const me=new Uint8Array(ee[q]),Te=me.length;for(let re=0;re<Te;re+=4){let ve=me[re],oe=me[re+1],ce=me[re+2];const le=me[re+3];le==0&&(ve=oe=ce=0),Y[se+re]=ve,Y[se+re+1]=oe,Y[se+re+2]=ce,Y[se+re+3]=le}se+=Te}return Y.buffer}(J),H=B(N,U);for(x=0;x<H.plte.length;x++)z.push(H.plte[x].est.rgba);let fe=0;for(x=0;x<V.length;x++){const ee=($=V[x]).img.length;var G=new Uint8Array(H.inds.buffer,fe>>2,ee>>2);K.push(G);const te=new Uint8Array(H.abuf,fe,ee);k&&a($.img,$.rect.width,$.rect.height,z,te,G),$.img.set(te),fe+=ee}}else for(O=0;O<V.length;O++){var $=V[O];const J=new Uint32Array($.img.buffer);var Z=$.rect.width;for(j=J.length,G=new Uint8Array(j),K.push(G),x=0;x<j;x++){const N=J[x];if(x!=0&&N==J[x-1])G[x]=G[x-1];else if(x>Z&&N==J[x-Z])G[x]=G[x-Z];else{let H=ie[N];if(H==null&&(ie[N]=H=z.length,z.push(N),z.length>=300))break;G[x]=H}}}const Ae=z.length;for(Ae<=256&&i==0&&(P=Ae<=2?1:Ae<=4?2:Ae<=16?4:8,P=Math.max(P,d)),O=0;O<V.length;O++){($=V[O]).rect.x,$.rect.y,Z=$.rect.width;const J=$.rect.height;let N=$.img;new Uint32Array(N.buffer);let H=4*Z,fe=4;if(Ae<=256&&i==0){H=Math.ceil(P*Z/8);var he=new Uint8Array(H*J);const ee=K[O];for(let te=0;te<J;te++){x=te*H;const q=te*Z;if(P==8)for(var X=0;X<Z;X++)he[x+X]=ee[q+X];else if(P==4)for(X=0;X<Z;X++)he[x+(X>>1)]|=ee[q+X]<<4-4*(1&X);else if(P==2)for(X=0;X<Z;X++)he[x+(X>>2)]|=ee[q+X]<<6-2*(3&X);else if(P==1)for(X=0;X<Z;X++)he[x+(X>>3)]|=ee[q+X]<<7-1*(7&X)}N=he,R=3,fe=1}else if(S==0&&V.length==1){he=new Uint8Array(Z*J*3);const ee=Z*J;for(x=0;x<ee;x++){const te=3*x,q=4*x;he[te]=N[q],he[te+1]=N[q+1],he[te+2]=N[q+2]}N=he,R=2,fe=3,H=3*Z}$.img=N,$.bpl=H,$.bpp=fe}return{ctype:R,depth:P,plte:z,frames:V}}function r(f,c,b,U,y,F,m){const p=Uint8Array,d=Uint32Array,i=new p(f[y-1]),k=new d(f[y-1]),R=y+1<f.length?new p(f[y+1]):null,P=new p(f[y]),W=new d(P.buffer);let O=c,j=b,x=-1,S=-1;for(let ie=0;ie<F.height;ie++)for(let z=0;z<F.width;z++){const K=F.x+z,G=F.y+ie,$=G*c+K,Z=W[$];Z==0||U[y-1].dispose==0&&k[$]==Z&&(R==null||R[4*$+3]!=0)||(K<O&&(O=K),K>x&&(x=K),G<j&&(j=G),G>S&&(S=G))}x==-1&&(O=j=x=S=0),m&&((1&O)==1&&O--,(1&j)==1&&j--),F={x:O,y:j,width:x-O+1,height:S-j+1};const V=U[y];V.rect=F,V.blend=1,V.img=new Uint8Array(F.width*F.height*4),U[y-1].dispose==0?(_(i,c,b,V.img,F.width,F.height,-F.x,-F.y,0),o(P,c,b,V.img,F)):_(P,c,b,V.img,F.width,F.height,-F.x,-F.y,0)}function o(f,c,b,U,y){_(f,c,b,U,y.width,y.height,-y.x,-y.y,2)}function u(f,c,b,U,y,F,m){const p=[];let d,i=[0,1,2,3,4];F!=-1?i=[F]:(c*U>5e5||b==1)&&(i=[0]),m&&(d={level:0});const k=ft;for(var R=0;R<i.length;R++){for(let O=0;O<c;O++)g(y,f,O,U,b,i[R]);p.push(k.deflate(y,d))}let P,W=1e9;for(R=0;R<p.length;R++)p[R].length<W&&(P=R,W=p[R].length);return p[P]}function g(f,c,b,U,y,F){const m=b*U;let p=m+b;if(f[p]=F,p++,F==0)if(U<500)for(var d=0;d<U;d++)f[p+d]=c[m+d];else f.set(new Uint8Array(c.buffer,m,U),p);else if(F==1){for(d=0;d<y;d++)f[p+d]=c[m+d];for(d=y;d<U;d++)f[p+d]=c[m+d]-c[m+d-y]+256&255}else if(b==0){for(d=0;d<y;d++)f[p+d]=c[m+d];if(F==2)for(d=y;d<U;d++)f[p+d]=c[m+d];if(F==3)for(d=y;d<U;d++)f[p+d]=c[m+d]-(c[m+d-y]>>1)+256&255;if(F==4)for(d=y;d<U;d++)f[p+d]=c[m+d]-D(c[m+d-y],0,0)+256&255}else{if(F==2)for(d=0;d<U;d++)f[p+d]=c[m+d]+256-c[m+d-U]&255;if(F==3){for(d=0;d<y;d++)f[p+d]=c[m+d]+256-(c[m+d-U]>>1)&255;for(d=y;d<U;d++)f[p+d]=c[m+d]+256-(c[m+d-U]+c[m+d-y]>>1)&255}if(F==4){for(d=0;d<y;d++)f[p+d]=c[m+d]+256-D(0,c[m+d-U],0)&255;for(d=y;d<U;d++)f[p+d]=c[m+d]+256-D(c[m+d-y],c[m+d-U],c[m+d-y-U])&255}}}function B(f,c){const b=new Uint8Array(f),U=b.slice(0),y=new Uint32Array(U.buffer),F=v(U,c),m=F[0],p=F[1],d=b.length,i=new Uint8Array(d>>2);let k;if(b.length<2e7)for(var R=0;R<d;R+=4)k=E(m,P=b[R]*(1/255),W=b[R+1]*(1/255),O=b[R+2]*(1/255),j=b[R+3]*(1/255)),i[R>>2]=k.ind,y[R>>2]=k.est.rgba;else for(R=0;R<d;R+=4){var P=b[R]*.00392156862745098,W=b[R+1]*(1/255),O=b[R+2]*(1/255),j=b[R+3]*(1/255);for(k=m;k.left;)k=C(k.est,P,W,O,j)<=0?k.left:k.right;i[R>>2]=k.ind,y[R>>2]=k.est.rgba}return{abuf:U.buffer,inds:i,plte:p}}function v(f,c,b){b==null&&(b=1e-4);const U=new Uint32Array(f.buffer),y={i0:0,i1:f.length,bst:null,est:null,tdst:0,left:null,right:null};y.bst=M(f,y.i0,y.i1),y.est=h(y.bst);const F=[y];for(;F.length<c;){let p=0,d=0;for(var m=0;m<F.length;m++)F[m].est.L>p&&(p=F[m].est.L,d=m);if(p<b)break;const i=F[d],k=L(f,U,i.i0,i.i1,i.est.e,i.est.eMq255);if(i.i0>=k||i.i1<=k){i.est.L=0;continue}const R={i0:i.i0,i1:k,bst:null,est:null,tdst:0,left:null,right:null};R.bst=M(f,R.i0,R.i1),R.est=h(R.bst);const P={i0:k,i1:i.i1,bst:null,est:null,tdst:0,left:null,right:null};for(P.bst={R:[],m:[],N:i.bst.N-R.bst.N},m=0;m<16;m++)P.bst.R[m]=i.bst.R[m]-R.bst.R[m];for(m=0;m<4;m++)P.bst.m[m]=i.bst.m[m]-R.bst.m[m];P.est=h(P.bst),i.left=R,i.right=P,F[d]=R,F.push(P)}for(F.sort((p,d)=>d.bst.N-p.bst.N),m=0;m<F.length;m++)F[m].ind=m;return[y,F]}function E(f,c,b,U,y){if(f.left==null)return f.tdst=function(k,R,P,W,O){const j=R-k[0],x=P-k[1],S=W-k[2],V=O-k[3];return j*j+x*x+S*S+V*V}(f.est.q,c,b,U,y),f;const F=C(f.est,c,b,U,y);let m=f.left,p=f.right;F>0&&(m=f.right,p=f.left);const d=E(m,c,b,U,y);if(d.tdst<=F*F)return d;const i=E(p,c,b,U,y);return i.tdst<d.tdst?i:d}function C(f,c,b,U,y){const{e:F}=f;return F[0]*c+F[1]*b+F[2]*U+F[3]*y-f.eMq}function L(f,c,b,U,y,F){for(U-=4;b<U;){for(;I(f,b,y)<=F;)b+=4;for(;I(f,U,y)>F;)U-=4;if(b>=U)break;const m=c[b>>2];c[b>>2]=c[U>>2],c[U>>2]=m,b+=4,U-=4}for(;I(f,b,y)>F;)b-=4;return b+4}function I(f,c,b){return f[c]*b[0]+f[c+1]*b[1]+f[c+2]*b[2]+f[c+3]*b[3]}function M(f,c,b){const U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=[0,0,0,0],F=b-c>>2;for(let m=c;m<b;m+=4){const p=f[m]*.00392156862745098,d=f[m+1]*(1/255),i=f[m+2]*(1/255),k=f[m+3]*(1/255);y[0]+=p,y[1]+=d,y[2]+=i,y[3]+=k,U[0]+=p*p,U[1]+=p*d,U[2]+=p*i,U[3]+=p*k,U[5]+=d*d,U[6]+=d*i,U[7]+=d*k,U[10]+=i*i,U[11]+=i*k,U[15]+=k*k}return U[4]=U[1],U[8]=U[2],U[9]=U[6],U[12]=U[3],U[13]=U[7],U[14]=U[11],{R:U,m:y,N:F}}function h(f){const{R:c}=f,{m:b}=f,{N:U}=f,y=b[0],F=b[1],m=b[2],p=b[3],d=U==0?0:1/U,i=[c[0]-y*y*d,c[1]-y*F*d,c[2]-y*m*d,c[3]-y*p*d,c[4]-F*y*d,c[5]-F*F*d,c[6]-F*m*d,c[7]-F*p*d,c[8]-m*y*d,c[9]-m*F*d,c[10]-m*m*d,c[11]-m*p*d,c[12]-p*y*d,c[13]-p*F*d,c[14]-p*m*d,c[15]-p*p*d],k=i,R=Q;let P=[Math.random(),Math.random(),Math.random(),Math.random()],W=0,O=0;if(U!=0)for(let x=0;x<16&&(P=R.multVec(k,P),O=Math.sqrt(R.dot(P,P)),P=R.sml(1/O,P),!(x!=0&&Math.abs(O-W)<1e-9));x++)W=O;const j=[y*d,F*d,m*d,p*d];return{Cov:i,q:j,e:P,L:W,eMq255:R.dot(R.sml(255,j),P),eMq:R.dot(P,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var Q={multVec:(f,c)=>[f[0]*c[0]+f[1]*c[1]+f[2]*c[2]+f[3]*c[3],f[4]*c[0]+f[5]*c[1]+f[6]*c[2]+f[7]*c[3],f[8]*c[0]+f[9]*c[1]+f[10]*c[2]+f[11]*c[3],f[12]*c[0]+f[13]*c[1]+f[14]*c[2]+f[15]*c[3]],dot:(f,c)=>f[0]*c[0]+f[1]*c[1]+f[2]*c[2]+f[3]*c[3],sml:(f,c)=>[f*c[0],f*c[1],f*c[2],f*c[3]]};ue.encode=function(f,c,b,U,y,F,m){U==null&&(U=0),m==null&&(m=!1);const p=n(f,c,b,U,[!1,!1,!1,0,m,!1]);return A(p,-1),w(p,c,b,y,F)},ue.encodeLL=function(f,c,b,U,y,F,m,p){const d={ctype:0+(U==1?0:2)+(y==0?0:4),depth:F,frames:[]},i=(U+y)*F,k=i*c;for(let R=0;R<f.length;R++)d.frames.push({rect:{x:0,y:0,width:c,height:b},img:new Uint8Array(f[R]),blend:0,dispose:1,bpp:Math.ceil(i/8),bpl:Math.ceil(k/8)});return A(d,0,!0),w(d,c,b,m,p)},ue.encode.compress=n,ue.encode.dither=a,ue.quantize=B,ue.quantize.getKDtree=v,ue.quantize.getNearest=E})();const Ye={toArrayBuffer(_,T){const D=_.width,s=_.height,e=D<<2,t=_.getContext("2d").getImageData(0,0,D,s),l=new Uint32Array(t.data.buffer),a=(32*D+31)/32<<2,w=a*s,A=122+w,n=new ArrayBuffer(A),r=new DataView(n),o=1<<20;let u,g,B,v,E=o,C=0,L=0,I=0;function M(f){r.setUint16(L,f,!0),L+=2}function h(f){r.setUint32(L,f,!0),L+=4}function Q(f){L+=f}M(19778),h(A),Q(4),h(122),h(108),h(D),h(-s>>>0),M(1),M(32),h(3),h(w),h(2835),h(2835),Q(8),h(16711680),h(65280),h(255),h(4278190080),h(1466527264),function f(){for(;C<s&&E>0;){for(v=122+C*a,u=0;u<e;)E--,g=l[I++],B=g>>>24,r.setUint32(v+u,g<<8|B),u+=4;C++}I<l.length?(E=o,setTimeout(f,Ye._dly)):T(n)}()},toBlob(_,T){this.toArrayBuffer(_,D=>{T(new Blob([D],{type:"image/bmp"}))})},_dly:9};var ae={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ct={[ae.CHROME]:16384,[ae.FIREFOX]:11180,[ae.DESKTOP_SAFARI]:16384,[ae.IE]:8192,[ae.IOS]:4096,[ae.ETC]:8192};const je=typeof window<"u",Je=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=je&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ut=(je||Je)&&(De&&De.getOriginalSymbol(window,"File")||typeof File<"u"&&File),He=(je||Je)&&(De&&De.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function We(_,T,D=Date.now()){return new Promise(s=>{const e=_.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]);let a=l.length;const w=new Uint8Array(a);for(;a--;)w[a]=l.charCodeAt(a);const A=new Blob([w],{type:t});A.name=T,A.lastModified=D,s(A)})}function Xe(_){return new Promise((T,D)=>{const s=new He;s.onload=()=>T(s.result),s.onerror=e=>D(e),s.readAsDataURL(_)})}function $e(_){return new Promise((T,D)=>{const s=new Image;s.onload=()=>T(s),s.onerror=e=>D(e),s.src=_})}function Be(){if(Be.cachedResult!==void 0)return Be.cachedResult;let _=ae.ETC;const{userAgent:T}=navigator;return/Chrom(e|ium)/i.test(T)?_=ae.CHROME:/iP(ad|od|hone)/i.test(T)&&/WebKit/i.test(T)?_=ae.IOS:/Safari/i.test(T)?_=ae.DESKTOP_SAFARI:/Firefox/i.test(T)?_=ae.FIREFOX:(/MSIE/i.test(T)||document.documentMode)&&(_=ae.IE),Be.cachedResult=_,Be.cachedResult}function Ze(_,T){const D=Be(),s=ct[D];let e=_,t=T,l=e*t;const a=e>t?t/e:e/t;for(;l>s*s;){const w=(s+e)/2,A=(s+t)/2;w<A?(t=A,e=A*a):(t=w*a,e=w),l=e*t}return{width:e,height:t}}function Le(_,T){let D,s;try{if(D=new OffscreenCanvas(_,T),s=D.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{D=document.createElement("canvas"),s=D.getContext("2d")}return D.width=_,D.height=T,[D,s]}function et(_,T){const{width:D,height:s}=Ze(_.width,_.height),[e,t]=Le(D,s);return T&&/jpe?g/.test(T)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(_,0,0,e.width,e.height),e}function Se(){return Se.cachedResult!==void 0||(Se.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Se.cachedResult}function ke(_,T={}){return new Promise(function(D,s){let e,t;var l=function(){try{return t=et(e,T.fileType||_.type),D([e,t])}catch(w){return s(w)}},a=function(w){try{var A=function(n){try{throw n}catch(r){return s(r)}};try{let n;return Xe(_).then(function(r){try{return n=r,$e(n).then(function(o){try{return e=o,function(){try{return l()}catch(u){return s(u)}}()}catch(u){return A(u)}},A)}catch(o){return A(o)}},A)}catch(n){A(n)}}catch(n){return s(n)}};try{if(Se()||[ae.DESKTOP_SAFARI,ae.MOBILE_SAFARI].includes(Be()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(_).then(function(w){try{return e=w,l()}catch{return a()}},a)}catch{a()}})}function Ce(_,T,D,s,e=1){return new Promise(function(t,l){let a;if(T==="image/png"){let A,n,r;return A=_.getContext("2d"),{data:n}=A.getImageData(0,0,_.width,_.height),r=ue.encode([n.buffer],_.width,_.height,4096*e),a=new Blob([r],{type:T}),a.name=D,a.lastModified=s,w.call(this)}{let A=function(){return w.call(this)};if(T==="image/bmp")return new Promise(n=>Ye.toBlob(_,n)).then((function(n){try{return a=n,a.name=D,a.lastModified=s,A.call(this)}catch(r){return l(r)}}).bind(this),l);{let n=function(){return A.call(this)};if(typeof OffscreenCanvas=="function"&&_ instanceof OffscreenCanvas)return _.convertToBlob({type:T,quality:e}).then((function(r){try{return a=r,a.name=D,a.lastModified=s,n.call(this)}catch(o){return l(o)}}).bind(this),l);{let r;return r=_.toDataURL(T,e),We(r,D,s).then((function(o){try{return a=o,n.call(this)}catch(u){return l(u)}}).bind(this),l)}}}function w(){return t(a)}})}function ge(_){_.width=0,_.height=0}function Re(){return new Promise(function(_,T){let D,s,e,t;return Re.cachedResult!==void 0?_(Re.cachedResult):We("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return D=l,ke(D).then(function(a){try{return s=a[1],Ce(s,D.type,D.name,D.lastModified).then(function(w){try{return e=w,ge(s),ke(e).then(function(A){try{return t=A[0],Re.cachedResult=t.width===1&&t.height===2,_(Re.cachedResult)}catch(n){return T(n)}},T)}catch(A){return T(A)}},T)}catch(w){return T(w)}},T)}catch(a){return T(a)}},T)})}function tt(_){return new Promise((T,D)=>{const s=new He;s.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return T(-2);const l=t.byteLength;let a=2;for(;a<l;){if(t.getUint16(a+2,!1)<=8)return T(-1);const w=t.getUint16(a,!1);if(a+=2,w==65505){if(t.getUint32(a+=2,!1)!=1165519206)return T(-1);const A=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,A);const n=t.getUint16(a,A);a+=2;for(let r=0;r<n;r++)if(t.getUint16(a+12*r,A)==274)return T(t.getUint16(a+12*r+8,A))}else{if((65280&w)!=65280)break;a+=t.getUint16(a,!1)}}return T(-1)},s.onerror=e=>D(e),s.readAsArrayBuffer(_)})}function rt(_,T){const{width:D}=_,{height:s}=_,{maxWidthOrHeight:e}=T;let t,l=_;return isFinite(e)&&(D>e||s>e)&&([l,t]=Le(D,s),D>s?(l.width=e,l.height=s/D*e):(l.width=D/s*e,l.height=e),t.drawImage(_,0,0,l.width,l.height),ge(_)),l}function nt(_,T){const{width:D}=_,{height:s}=_,[e,t]=Le(D,s);switch(T>4&&T<9?(e.width=s,e.height=D):(e.width=D,e.height=s),T){case 2:t.transform(-1,0,0,1,D,0);break;case 3:t.transform(-1,0,0,-1,D,s);break;case 4:t.transform(1,0,0,-1,0,s);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,s,0);break;case 7:t.transform(0,-1,-1,0,s,D);break;case 8:t.transform(0,-1,1,0,0,D)}return t.drawImage(_,0,0,D,s),ge(_),e}function qe(_,T,D=0){return new Promise(function(s,e){let t,l,a,w,A,n,r,o,u,g,B,v,E,C,L,I,M,h,Q,f;function c(U=5){if(T.signal&&T.signal.aborted)throw T.signal.reason;t+=U,T.onProgress(Math.min(t,100))}function b(U){if(T.signal&&T.signal.aborted)throw T.signal.reason;t=Math.min(Math.max(U,t),100),T.onProgress(t)}return t=D,l=T.maxIteration||10,a=1024*T.maxSizeMB*1024,c(),ke(_,T).then((function(U){try{return[,w]=U,c(),A=rt(w,T),c(),new Promise(function(y,F){var m;if(!(m=T.exifOrientation))return tt(_).then((function(d){try{return m=d,p.call(this)}catch(i){return F(i)}}).bind(this),F);function p(){return y(m)}return p.call(this)}).then((function(y){try{return n=y,c(),Re().then((function(F){try{return r=F?A:nt(A,n),c(),o=T.initialQuality||1,u=T.fileType||_.type,Ce(r,u,_.name,_.lastModified,o).then((function(m){try{{let d=function(){if(l--&&(L>a||L>E)){let k,R;return k=f?.95*Q.width:Q.width,R=f?.95*Q.height:Q.height,[M,h]=Le(k,R),h.drawImage(Q,0,0,k,R),o*=u==="image/png"?.85:.95,Ce(M,u,_.name,_.lastModified,o).then(function(P){try{return I=P,ge(Q),Q=M,L=I.size,b(Math.min(99,Math.floor((C-L)/(C-a)*100))),d}catch(W){return e(W)}},e)}return[1]},i=function(){return ge(Q),ge(M),ge(A),ge(r),ge(w),b(100),s(I)};if(g=m,c(),B=g.size>a,v=g.size>_.size,!B&&!v)return b(100),s(g);var p;return E=_.size,C=g.size,L=C,Q=r,f=!T.alwaysKeepResolution&&B,(p=(function(k){for(;k;){if(k.then)return void k.then(p,e);try{if(k.pop){if(k.length)return k.pop()?i.call(this):k;k=d}else k=k.call(this)}catch(R){return e(R)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(m){return e(m)}}).bind(this),e)}catch(F){return e(F)}}).bind(this),e)}catch(y){return e(y)}}).bind(this),e)})}const ht=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Me;function dt(_,T){return new Promise((D,s)=>{Me||(Me=function(t){const l=[];return l.push(t),URL.createObjectURL(new Blob(l))}(ht));const e=new Worker(Me);e.addEventListener("message",function(t){if(T.signal&&T.signal.aborted)e.terminate();else if(t.data.progress===void 0){if(t.data.error)return s(new Error(t.data.error)),void e.terminate();D(t.data.file),e.terminate()}else T.onProgress(t.data.progress)}),e.addEventListener("error",s),T.signal&&T.signal.addEventListener("abort",()=>{s(T.signal.reason),e.terminate()}),e.postMessage({file:_,imageCompressionLibUrl:T.libURL,options:{...T,onProgress:void 0,signal:void 0}})})}function ne(_,T){return new Promise(function(D,s){let e,t,l,a,w,A;if(e={...T},l=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,w=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=u=>{l=u,typeof a=="function"&&a(l)},!(_ instanceof Blob||_ instanceof ut))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(_.type))return s(new Error("The file given is not an image"));if(A=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!w||typeof Worker!="function"||A)return qe(_,e).then((function(u){try{return t=u,o.call(this)}catch(g){return s(g)}}).bind(this),s);var n=(function(){try{return o.call(this)}catch(u){return s(u)}}).bind(this),r=function(u){try{return qe(_,e).then(function(g){try{return t=g,n()}catch(B){return s(B)}},s)}catch(g){return s(g)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",dt(_,e).then(function(u){try{return t=u,n()}catch{return r()}},r)}catch{r()}function o(){try{t.name=_.name,t.lastModified=_.lastModified}catch{}try{e.preserveExif&&_.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===_.type)&&(t=Ge(_,t))}catch{}return D(t)}})}ne.getDataUrlFromFile=Xe,ne.getFilefromDataUrl=We,ne.loadImage=$e,ne.drawImageInCanvas=et,ne.drawFileInCanvas=ke,ne.canvasToFile=Ce,ne.getExifOrientation=tt,ne.handleMaxWidthOrHeight=rt,ne.followExifOrientation=nt,ne.cleanupCanvasMemory=ge,ne.isAutoOrientationInBrowser=Re,ne.approximateBelowMaximumCanvasSizeOfBrowser=Ze,ne.copyExifWithoutOrientation=Ge,ne.getBrowserName=Be,ne.version="2.0.2";async function At(_,T,D={}){console.log(" CONVERTER.JS - convertFile called"),console.log("File:",_.name),console.log("Target Format:",T),console.log("Options:",D);const s={enhance:D.enhance||!1,ocr:D.ocr||!1,summarize:D.summarize||!1,smartCompress:D.compress||D.smartCompress||!1};console.log("AI Features:",s);const e=pt(_.name);console.log("File Type:",e);let t={blob:null,filename:"",aiResults:{}};try{if(T==="compress")console.log(" Compressing image..."),t.blob=await wt(_,s.smartCompress),t.filename=`${_.name.split(".")[0]}_compressed.${_.name.split(".").pop()}`,console.log(" Compression complete");else if(e==="image")console.log(" Converting image..."),t.blob=await gt(_,T,s),t.filename=`${_.name.split(".")[0]}.${T}`,console.log(" Image conversion complete");else if(e==="pdf")if(console.log(" Converting PDF..."),T==="txt")t.blob=new Blob(["PDF conversion to text requires additional setup. Try uploading an image for OCR instead."],{type:"text/plain"}),t.filename=`${_.name.split(".")[0]}.txt`;else throw new Error("PDF conversion requires additional configuration");else throw console.log(" Unsupported file type:",e),new Error("Unsupported file type for this demo");if(!t.blob)throw console.error(" No blob generated!"),new Error("Conversion failed: No blob generated");if(console.log(" Blob generated, size:",t.blob.size),s.ocr&&e==="image"){console.log(" Running OCR...");try{const l=await Ne(()=>Ke(()=>import("./index-C2FqwIQw-yIlvf1iy.js"),__vite__mapDeps([0,1,2])).then(w=>w.i),Oe([0,1,2])),{data:{text:a}}=await l.recognize(_,"eng");t.aiResults.ocr=a,console.log(" OCR complete"),s.summarize&&a&&(t.aiResults.summary=mt(a),console.log(" Summarization complete"))}catch(l){console.log(" OCR skipped:",l.message)}}return s.enhance&&e==="image"&&(t.aiResults.enhanced=!0,console.log(" Enhancement applied")),console.log(" CONVERTER.JS - Final result:",t),t}catch(l){throw console.error(" CONVERTER.JS ERROR:",l),l}}async function gt(_,T,D={}){return new Promise((s,e)=>{const t=new FileReader;t.onload=async l=>{const a=new Image;a.onload=async()=>{const w=document.createElement("canvas");let A=a.width,n=a.height;D.enhance&&(A*=1.2,n*=1.2),w.width=A,w.height=n;const r=w.getContext("2d");r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(a,0,0,A,n);let o="image/png",u=.92;switch(T){case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"webp":o="image/webp";break;case"pdf":const{jsPDF:g}=await Ne(async()=>{const{jsPDF:E}=await Ke(()=>import("./jspdf.es.min-CbiRSg5i-DGNfBwXG.js"),__vite__mapDeps([3,1,2])).then(C=>C.j);return{jsPDF:E}},Oe([3,1,2])),B=w.toDataURL("image/jpeg",.9),v=new g({orientation:A>n?"landscape":"portrait",unit:"px",format:[A,n]});v.addImage(B,"JPEG",0,0,A,n),s(v.output("blob"));return}w.toBlob(g=>{g?s(g):e(new Error("Failed to convert image"))},o,u)},a.onerror=()=>e(new Error("Failed to load image")),a.src=l.target.result},t.onerror=()=>e(new Error("Failed to read file")),t.readAsDataURL(_)})}async function wt(_,T=!1){const D={maxSizeMB:T?.5:1,maxWidthOrHeight:T?1920:2048,useWebWorker:!0};try{return await ne(_,D)}catch(s){return console.error("Compression error:",s),_}}function mt(_,T=3){if(!_||_.length<100)return _;const D=_.replace(/\n+/g," ").split(/[.!?]+/).map(s=>s.trim()).filter(s=>s.length>20);return D.length<=T?_:D.map((s,e)=>({sentence:s,score:(e===0?3:0)+(s.length>50&&s.length<150?2:0),index:e})).sort((s,e)=>e.score-s.score).slice(0,T).sort((s,e)=>s.index-e.index).map(s=>s.sentence).join(". ")+"."}function pt(_){const T=_.split(".").pop().toLowerCase();return["jpg","jpeg","png","webp","heic","gif","bmp"].includes(T)?"image":["pdf"].includes(T)?"pdf":["doc","docx"].includes(T)?"document":["xls","xlsx"].includes(T)?"spreadsheet":"other"}export{At as convertFile};
